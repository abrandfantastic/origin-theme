(window.webpackJsonp=window.webpackJsonp||[]).push([[62,41],{559(t,e,r){"use strict";const n=r(2); const o=r(560);n({target:"String",proto:!0,forced:r(561)("link")},{link(t){return o(this,"a","href",t)}})},560(t,e,r){const n=r(9); const o=r(49); const c=r(35); const l=/"/g; const d=n("".replace);t.exports=function(t,e,r,n){const f=c(o(t)); let h="<"+e;return r!==""&&(h+=" "+r+'="'+d(c(n),l,"&quot;")+'"'),h+">"+f+"</"+e+">"}},561(t,e,r){const n=r(12);t.exports=function(t){return n((function(){const e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},572(t,e,r){"use strict";e.a={mounted(){this.$store.state.refetchCurrency&&this.$fetch()}}},583(t,e,r){"use strict";const n=r(0); const o=(r(16),r(46),r(29),r(15),r(58),r(559),r(14)); const c=r.n(o); const l=function(t){const e=Array.isArray(t)?c()(t,"0.file.url"):c()(t,"file.url"); const r=1200; const n=630;return e?"".concat(e,"?w=").concat(r,"&h=").concat(n,"&q=100&fit=fill"):""};e.a={asyncData(t){return Object(n.a)(regeneratorRuntime.mark((function e(){let r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$swell,e.next=3,r.settings.get("store.name");case 3:return n=e.sent,e.next=6,r.settings.get("store.url");case 6:return o=e.sent,e.abrupt("return",{storeName:n,storeUrl:o});case 8:case"end":return e.stop()}}),e)})))()},computed:{pageMeta(){const t=this.$route; const e=this.category; const r=this.categories; const n=this.product; const o=this.products; const d=this.page; const f=this.storeName; const h=this.storeUrl; const v=function(t){return t+" - "+f}; const meta={storeName:f,url:h+t.path,title:f,description:"",image:{},link:[]};if(c()(this,"$fetchState.pending"))meta.title="Loading...";else if(e){const title=e.metaTitle||e.name;meta.title=v(title),meta.description=e.metaDescription||"",meta.image=l(e.images)}else if(r)meta.title=v("Categories"),meta.image=l(c()(r,"0.images"));else if(n){const m=n.metaTitle||n.name;meta.title=v(m),meta.description=n.metaDescription||"",meta.image=l(n.images)}else if(o)meta.title=v("Products"),meta.image=l(c()(o,"0.images"));else if(d){const y=d.metaTitle||d.name;meta.title=v(y),meta.description=d.metaDescription||""}return meta},structuredData(){const t=this.product;if(t){const e=t.stockStatus||"inStock";return{"@context":"http://schema.org","@type":"Product",name:t.name,image:l(c()(this,"product.images[0]")),description:t.description,offers:{"@type":"Offer",price:t.price,priceCurrency:t.currency,availability:"http://schema.org/".concat({inStock:"InStock",limitedAvailability:"LimitedAvailability",preorder:"PreOrder",outOfStock:"OutOfStock",soldOut:"SoldOut"}[e])}}}}},head(){const t=this.pageMeta; const e=this.structuredData; const r=t.storeName; const n=t.url; const title=t.title; const o=t.description; const image=t.image; const link=t.link; const script=[];return e&&script.push({innerHTML:JSON.stringify(e),type:"application/ld+json"}),{__dangerouslyDisableSanitizers:["script"],script,title,link,meta:[{hid:"description",name:"description",content:o},{hid:"og:site_name",property:"og:site_name",content:r},{hid:"og:title",property:"og:title",content:title},{hid:"og:description",property:"og:description",content:o},{hid:"og:url",property:"og:url",content:n},{hid:"og:image",property:"og:image",content:image},{property:"twitter:card",content:"summary_large_image"},{property:"twitter:title",content:title},{property:"twitter:description",content:o},{property:"twitter:image",content:image}]}}}},658(t,e,r){"use strict";r.r(e);const n=r(87); const o=(r(66),r(41),r(37),r(7),r(27),r(46),r(47),{name:"PaginationButtons",props:{currentPage:{type:Number,default:1},count:{type:Number,default:1},limit:{type:Number,default:1},pages:{type:Object,default(){return{}}},appearance:{type:String,default:"buttons",validator(t){return["prevNext","buttons"].includes(t)}}},computed:{pagesCount(){const t=this.count; const e=this.limit;return Math.ceil((t||1)/(e||1))},pageButtons(){const t=Object(n.a)(Array(this.pagesCount).keys()).map((function(t){return++t}));return this.pagesCount<=5?t:this.currentPage-2>1&&this.currentPage+2<t.length?[t[0],"break"].concat(Object(n.a)(t.slice(this.currentPage-2,this.currentPage+1)),["break",t[t.length-1]]):this.currentPage-3<=0?[].concat(Object(n.a)(t.slice(0,4)),["break",t[t.length-1]]):this.currentPage+3>t.length?[t[0],"break"].concat(Object(n.a)(t.slice(-4))):t},prevPage(){return this.currentPage>1?this.currentPage-1:0},nextPage(){return this.currentPage<this.pagesCount?this.currentPage+1:0}}}); const c=r(3); const component=Object(c.a)(o,(function(){const t=this; const e=t.$createElement; const r=t._self._c||e;return r("div",[t.appearance==="prevNext"?r("aside",{staticClass:"flex items-center justify-between"},[r("NuxtLink",{staticClass:"btn sm:w-32",class:{disabled:!t.prevPage},attrs:{tabindex:t.prevPage?0:-1,to:t.localePath({query:Object.assign({},t.$route.query,{page:t.prevPage})})}},[t._v("\n      "+t._s(t.$t("categories._slug.pagination.previous"))+"\n    ")]),t._v(" "),r("div",{staticClass:"text-center"},[t._v("\n      "+t._s(t.$t("categories._slug.pagination.page",{currentPage:t.currentPage,pagesCount:t.pagesCount}))+"\n    ")]),t._v(" "),r("NuxtLink",{staticClass:"btn sm:w-32",class:{disabled:!t.nextPage},attrs:{tabindex:t.nextPage?0:-1,to:t.localePath({query:Object.assign({},t.$route.query,{page:t.nextPage})})}},[t._v("\n      "+t._s(t.$t("categories._slug.pagination.next"))+"\n    ")])],1):r("div",{},[r("div",{staticClass:"mb-4 flex justify-center gap-x-2"},[t._l(t.pageButtons,(function(e,n){return[e!=="break"?r("NuxtLink",{key:n,staticClass:"btn h-auto px-3 py-2",class:{disabled:t.currentPage===e},attrs:{to:t.localePath({query:{page:e}})}},[t._v("\n          "+t._s(e)+"\n        ")]):t._e(),t._v(" "),e==="break"?r("span",{key:n,staticClass:"flex items-end"},[t._v("\n          â€¦\n        ")]):t._e()]}))],2),t._v(" "),r("div",{staticClass:"text-center"},[t._v("\n      "+t._s(t.$t("categories._slug.pagination.page",{currentPage:t.currentPage,pagesCount:t.pagesCount}))+"\n    ")])])])}),[],!1,null,null,null);e.default=component.exports},692(t,e,r){"use strict";r.r(e);r(15),r(17),r(23),r(24);const n=r(6); const o=r(87); const c=r(0); const l=(r(16),r(323),r(37),r(7),r(27),r(19),r(18),r(25),r(88),r(14)); const d=r.n(l); const f=r(11); const h=r(583); const v=(r(41),r(45),r(104)); const m=r.n(v);function y(t,e){const r={}; const n=["select"];if(m()(t)&&Array.isArray(e)){const o=Object.keys(t);e.forEach((function(e){const c=e.id; const l=e.type;if(o.includes(c)){const d=t[c]; const f=n.includes(l)&&!Array.isArray(d);r[c]=f?[d]:d}}))}return r}const _=r(572);function x(object,t){const e=Object.keys(object);if(Object.getOwnPropertySymbols){let r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function C(t){for(let i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function P(t){return~~d()(t,"content.productRows",4)*~~d()(t,"content.productCols",6)}const w={name:"CategoryDetailPage",mixins:[h.a,_.a],data(){return{slug:void 0,category:void 0,products:void 0,productsCount:0,filters:[],filterState:{},pages:{},page:1,limit:24,sortMode:"",filterModalIsVisible:!1,paginationStyle:"prevNext"}},fetch(){const t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){let r,n,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$swell,n=t.$route,t.slug=n.params.slug,t.page=parseInt(n.query.page)||1,t.sortMode=n.query.sort||"",t.products=Object(o.a)(Array(t.limit).keys()).map((function(){return{}})),e.next=7,r.categories.get(t.slug);case 7:return(c=e.sent)||t.$nuxt.error({statusCode:404,message:t.$t("errors.categoryNotFound")}),t.limit=P(c),e.next=12,t.fetchProducts();case 12:return l=e.sent,t.category=c,e.next=16,r.products.filterableAttributeFilters(l);case 16:if(t.filters=e.sent,t.filterState=y(n.query,t.filters),!t.activeFilterCount){e.next=22;break}return e.next=21,t.fetchProducts(t.filterState,t.filters);case 21:l=e.sent;case 22:t.setProducts(l),t.paginationStyle=d()(c,"content.paginationStyle");case 24:case"end":return e.stop()}}),e)})))()},computed:C(C({},Object(f.b)(["currency"])),{},{settings(){return d()(this,"category.content",{})},activeFilterCount(){return Object.keys(this.filterState).length}}),watch:{"$route.query":"updateProductsFiltered"},mounted(){const t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.updateProductsFiltered();case 2:case"end":return e.stop()}}),e)})))()},created(){this.sortModes=[{value:"",label:this.$t("categories._slug.sortModes.latest")},{value:"popularity",label:this.$t("categories._slug.sortModes.popularity")},{value:"price_asc",label:this.$t("categories._slug.sortModes.priceAsc")},{value:"price_desc",label:this.$t("categories._slug.sortModes.priceDesc")}]},methods:{fetchProducts(t){const e=this.$swell; const r=this.page; const n=this.limit; const o=this.sortMode; const c=this.slug;return e.products.list({page:r,limit:n<=100?n:100,sort:void 0===o.value?o:o.value,categories:c,$filters:t,expand:["variants"],$currency:e.currency.list().map((function(t){return t.code}))})},setProducts(t){this.pages=t.pages,this.products=t.results,this.productsCount=t.count},updateProductsFiltered(){const t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){let r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$route,t.page=parseInt(r.query.page)||1,t.sortMode=r.query.sort||"",t.filterState=y(r.query,t.filters),e.next=6,t.fetchProducts(t.filterState,t.filters);case 6:n=e.sent,t.setProducts(n);case 8:case"end":return e.stop()}}),e)})))()},toggleFilterModal(){this.filterModalIsVisible=!this.filterModalIsVisible},updateFilters(t){this.updateRouteQuery(t),this.toggleFilterModal()},updateSortMode(option){this.updateRouteQuery(C(C({},this.filterState),{},{sort:void 0===option.value?option:option.value}))},updateRouteQuery(t){const e=this.$route; const path=e.path; const r=e.query; const n=C(C({},r),t); const o=y(r,this.filters); const c=y(t,this.filters);Object.keys(o).forEach((function(t){c[t]||delete n[t]})),n.sort||delete n.sort,this.$router.replace({path,query:n}).catch((function(t){}))}}}; const k=r(3); const component=Object(k.a)(w,(function(){const t=this; const e=t.$createElement; const r=t._self._c||e;return r("main",{},[r("FilterPanel",{directives:[{name:"show",rawName:"v-show",value:t.filterModalIsVisible,expression:"filterModalIsVisible"}],attrs:{show:t.filterModalIsVisible,filters:t.filters,"filter-state":t.filterState},on:{"click-close"(e){return t.toggleFilterModal()},change:t.updateFilters}}),t._v(" "),t.settings.showHeroImage?r("section",{staticClass:"relative"},[r("div",{staticClass:"h-64 sm:h-72 md:h-80 lg:h-96 xl:h-112"},[t.category&&t.category.images?r("VisualMedia",{attrs:{source:t.category.images[0],"is-background":!0}}):t._e()],1),t._v(" "),t.category&&t.settings.darkenHeroImage?r("div",{staticClass:"absolute inset-0 h-full w-full bg-primary-darkest",style:{opacity:t.category.images?t.settings.darkenHeroImage/100:1}}):t._e(),t._v(" "),t.category?r("div",{staticClass:"center-xy container absolute text-center"},[r("h1",{class:{"text-primary-lightest":t.settings.textColor==="light","text-primary-darkest":t.settings.textColor==="dark"}},[t._v("\n        "+t._s(t.category.name)+"\n      ")]),t._v(" "),r("div",{staticClass:"mx-auto max-w-128 text-lg",class:{"text-primary-lightest":t.settings.textColor==="light","text-primary-darkest":t.settings.textColor==="dark"},domProps:{innerHTML:t._s(t.category.description)}})]):t._e()]):t._e(),t._v(" "),r("div",{staticClass:"container pb-4 pt-7"},[t.settings.showHeroImage?t._e():[!t.category&&t.$fetchState.pending?r("div",{staticClass:"loader-el mt-2 mb-9 h-10 w-64"}):t.settings.headingPosition!=="hero_image"?r("div",{staticClass:"mb-7"},[r("h1",[t._v(t._s(t.category&&t.category.name))]),t._v(" "),r("div",{staticClass:"text-lg",domProps:{innerHTML:t._s(t.category&&t.category.description)}})]):t._e()],t._v(" "),r("aside",{staticClass:"mb-6 flex items-center text-sm"},[t.filters.length>0?r("button",{staticClass:"inline-flex items-center",on:{click(e){return t.toggleFilterModal()}}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.activeFilterCount,expression:"activeFilterCount"}],staticClass:"flex h-6 w-6 items-center justify-center rounded-full bg-accent-default text-primary-lighter"},[r("span",{staticClass:"block text-2xs leading-none"},[t._v(t._s(t.activeFilterCount))])]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!t.activeFilterCount,expression:"!activeFilterCount"}]},[r("BaseIcon",{attrs:{icon:"uil:filter"}})],1),t._v(" "),r("span",{staticClass:"ml-1"},[t._v(t._s(t.$t("categories._slug.filters")))])]):t._e(),t._v(" "),r("span",{staticClass:"ml-1 hidden sm:inline"},[t._v(t._s(t.$fetchState.pending?"":t.$tc("categories._slug.productsCount",t.productsCount,{count:t.productsCount})))]),t._v(" "),r("div",{staticClass:"ml-auto"},[r("div",{staticClass:"flex items-center"},[r("span",{staticClass:"pr-2"},[t._v(t._s(t.$t("categories._slug.sort"))+"Â ")]),t._v(" "),r("InputDropdown",{staticClass:"w-40",attrs:{options:t.sortModes,value:t.sortMode},on:{change:t.updateSortMode}})],1)])]),t._v(" "),t.products.length?r("ProductPreviews",{attrs:{products:t.products,"column-count":t.settings.productCols}}):t.activeFilterCount>0?r("div",{staticClass:"rounded bg-primary-lighter py-16 text-center"},[r("p",[t._v(t._s(t.$t("categories._slug.filterProductsNotFound")))]),t._v(" "),r("BaseButton",{staticClass:"mt-4",attrs:{appearance:"light",fit:"static",label:t.$t("categories._slug.editFilters")},nativeOn:{click(e){return t.toggleFilterModal.apply(null,arguments)}}})],1):r("div",{staticClass:"rounded bg-primary-lighter py-16 text-center"},[r("p",[t._v(t._s(t.$t("categories._slug.categoryProductsNotFound")))])]),t._v(" "),t.pages?r("div",{staticClass:"py-2 sm:py-4 md:py-6"},[r("PaginationButtons",{attrs:{"current-page":t.page,pages:t.pages,count:t.productsCount,limit:t.limit,appearance:t.paginationStyle}})],1):t._e()],2)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{FilterPanel:r(685).default,BaseIcon:r(32).default,InputDropdown:r(324).default,ProductPreviews:r(309).default,BaseButton:r(86).default,PaginationButtons:r(658).default})}}]);